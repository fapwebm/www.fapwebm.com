var $body,app,winObj;app=angular.module("app.directives",[]),winObj=angular.element(window),$body=angular.element("body"),app.directive("ngVideo",["$sce","$compile",function(){return{restrict:"A",scope:!0,templateUrl:"/partials/video.html",link:function(e,n){var o;return o=n.find("video:first")[0],$(n).one("click",function(){return o.src=o.dataset.src,n.addClass("loaded"),n.on("mousemove",function(){return o.paused?o.play():void 0}),n.on("mouseleave",function(){return o.pause()}),n.trigger("mousemove"),e.goFullWidth=function(){return o.pause(),e.$emit("goingFullscreen",e.post)}})}}}]),app.directive("ngFullscreen",["$sce",function(){return{restrict:"A",scope:!0,templateUrl:"/partials/video-full.html",link:function(e,n){var o,t;return n.on("click",function(){return $body.removeClass("popup-open")}),n.find("a").on("click",function(e){return e.stopPropagation()}),o=function(n,o){return $body.addClass("popup-open"),n?e.post=o:e.$apply(function(){return e.post=o})},e.$parent.$on("goingFullscreen",o),t=function(e,n,t){return-1!==n.indexOf(e.keyCode)&&1===t.length?(e.preventDefault(),o(!1,t.scope().post)):void 0},winObj.on("keydown",function(n){var o;if($body.hasClass("popup-open"))return o=angular.element("[ng-video] video[data-src='"+e.post.src+"']").parents("li:first"),t(n,[65,37,38,87],o.prev()),t(n,[68,39,40,83],o.next())})}}}]);