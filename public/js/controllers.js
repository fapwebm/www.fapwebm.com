var $body,$container,$search,$searchInput,app,winObj;app=angular.module("app.controllers",["infinite-scroll"]),winObj=angular.element(window),$body=angular.element("html, body"),$container=angular.element("#container"),$search=angular.element("#header form"),$searchInput=$search.find("input"),app.controller("MainCtrl",["$scope","$pages",function(n,e){var r,t,a;return n.posts=[],n.board="/"!==location.pathname?location.pathname.replace(/\//g,""):"gif",r=function(e,r){var t,a,o,i,u;if(o=e.data,null!=o.error)return n.posts=o;for(a=i=0,u=o.length;u>i;a=++i)t=o[a],n.posts.push(t);return null!=r?r():void 0},t=1,a=!1,require(["infinitescroll"],function(){return n.nextPage=function(){return a?void 0:(a=!0,e.fetch("/"+n.board+"/"+t).then(function(n){return r(n,function(){return a=0===n.data.length,a?void 0:t++})}))},n.nextPage()}),$search.on("submit",function(){var o;return n.posts=[],o=$searchInput.val(),a=""!==o,""!==o?e.fetch("/"+n.board+"/search/"+o).then(function(n){return r(n,function(){return winObj.scrollTop(0)})}):(t=1,n.nextPage())})}]);